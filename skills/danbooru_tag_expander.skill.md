# Danbooru Tag Expander Skill

Stable Diffusion画像生成用のdanbooruタグを体系的に大量拡充するためのスキル。

## 1. タグ命名規則

### フォーマット
- キー: `snake_case`（英語、danbooruタグ互換）
- 値: 日本語説明文（SDで生成される視覚的内容を簡潔に）
- 例: `"cowgirl_position": "騎乗位（女性が上に跨る体位）"`

### 命名ルール
- danbooru/Stable Diffusion で実際に認識されるタグを優先
- 複合タグはアンダースコア結合: `long_hair`, `blue_eyes`, `from_below`
- 体位・行為タグは具体的に: `missionary_position`, `doggy_style`
- 修飾語付きバリエーション: `slight_blush`, `deep_blush`, `full_body_blush`
- 組み合わせタグ: `cowgirl_position_from_below`, `ahegao_with_tongue_out`

## 2. タグ品質基準

### 必須条件
- **視覚的具体性**: SDが画像として生成できる視覚的要素であること
- **一意性**: 同カテゴリ内で意味が重複しないこと
- **SD互換性**: Stable Diffusionモデルが理解できるタグであること
- **実用性**: CG集制作で実際に使用されるタグであること

### 禁止事項
- 抽象概念のみのタグ（例: ×`love`, ○`heart_hands`）
- 同義語の重複登録（例: `big_breasts`と`large_breasts`の両方は不可）
- 日本語キー（キーは必ず英語snake_case）
- ネガティブプロンプト用タグ

## 3. カテゴリ別拡充戦略

### SFW外見系（clothing, hair, accessories等）
- 素材・色・スタイルのバリエーション展開
- 着用状態のバリエーション（正装/着崩し/脱ぎかけ）
- 組み合わせタグ（服+ポーズ、髪+動き）
- 季節・シーン特化バリエーション

### 背景・環境系（locations, lighting, weather等）
- 時間帯×場所の組み合わせ
- 天候×照明の組み合わせ
- 室内ディテール（家具配置、小物、壁材）
- 屋外要素（植生、建物、空）

### ポーズ・構図系（poses, camera_angles, compositions等）
- 視点バリエーション（正面/横/背面/俯瞰/仰角）
- 体のパーツフォーカス
- 2人以上の構図パターン
- 動的ポーズ vs 静的ポーズ

### NSFW系（nsfw_positions, nsfw_acts, nsfw_expressions等）
- intensity段階別の細分化（1:暗示→5:過激）
- 体位×アングルの組み合わせ
- 表情×身体反応の組み合わせ
- 事前→行為中→事後の時間軸展開
- 衣装状態との組み合わせ

### 効果・雰囲気系（effects, mood, atmosphere等）
- 光源タイプ別バリエーション
- 色温度・色調バリエーション
- パーティクル・エフェクト
- ボケ・被写界深度表現

## 4. 拡充手順

1. **現状分析**: カテゴリの既存タグを確認し、カバー範囲を把握
2. **ギャップ特定**: 不足している視覚的要素・バリエーションを洗い出し
3. **タグ生成**: 品質基準に従い、不足分を網羅的に生成
4. **重複チェック**: 同カテゴリ内の既存キーと完全一致チェック
5. **バランス確認**: 特定サブカテゴリに偏りすぎていないか確認

## 5. 目標数の目安

| 現在のサイズ | 目標 | 追加数目安 |
|---|---|---|
| 40-60 | 120-150 | +60-110 |
| 60-80 | 150-180 | +70-120 |
| 80-120 | 180-220 | +60-140 |
| 120-200 | 250-300 | +50-180 |

## 6. 出力フォーマット

JSON辞書形式で出力:
```json
{
  "category_name": {
    "new_tag_1": "日本語説明1",
    "new_tag_2": "日本語説明2"
  }
}
```

既存キーは含めない。新規追加分のみ。
